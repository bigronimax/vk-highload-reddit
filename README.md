# Курсовая работа по предмету "Проектирование высоконагруженных систем"

## Содержание
### [1. Тема и целевая аудитория](#first)
### [2. Расчет нагрузки](#second)
### [Список использованных источников](#sources)

<a name="first"></a>
## 1. Тема и целевая аудитория

## Тема
  **Reddit** — это веб-сервис, сочетающий в себе черты форума и социальной сети и основанный на сообществах по интересам.

## Целевая аудитория
  - DAU - 110M. [^2]
  - WAU - 416M. [^2]
  - MAU - 1.21B. [^5]
  - ## Процент трафика по странам
  ![Countries stats](/assets/countries-stat.png) [^1]

## Продуктовые метрики
  - 550 миллионов постов за 2024 год. [^3]
  - 2,72 миллиарда комментариев за 2024 год. [^3]
  - Всего 22+ миллиарда комментариев и постов. [^2]
  - В среднем 40 миллионов поисковых запросов в день за декабрь 2024. [^3]
  - В среднем 9.4 миллиона положительных оценок в день. [^7]
  - 45975 новых сабреддитов каждый месяц. [^4]
  - 1533 новых сабреддитов каждый день. [^4]
  - На момент мая 2022 года было создано 3.5+ миллиона сабреддитов. [^6]
  - Средняя продолжительность сессии - 13.32 минут. [^1]
  - Около 3-4 страниц за визит. [^1]
  - В среднем 4.88 миллиарда визитов за месяц. [^1]

## MVP
  1. Регистрация и авторизация пользователей
  2. Создание и публикация постов 
  3. Создание комментариев к постам
  4. Система оценивания постов/комментариев
  5. Создание тематических сообществ (сабреддиты)
  6. Поиск постов/сообществ
  7. Персонализированная лента рекомендаций

<a name="second"></a>
## 2. Расчет нагрузки 
## Продуктовые метрики

| Метрика | Значение         |
|---------|------------------|
| DAU     | 110 млн [^2]     |
| MAU     | 1.21 млрд [^5]   |

## Среднее количество действий пользователя по действиям из MVP в день
Из-за отсутствия некоторых свежих и публично опубликованных в сети данных делаю предположение, что данные аналогичны и для текущего 2025 года.

  - Информация касательно регистраций и авторизаций пользователей на сервисе публично не разглашается, поэтому предположу, что пользователь авторизуется в среднем раз в месяц -> в день 1 / 30 = 0.03 раза.
  - Согласно [^3] за 2024 было опубликовано 550 млн постов. Тогда в день -> 550 млн / 365 = 1.507 млн постов. Один пользователь публикует ежедневно 1.507 млн / 110 млн (DAU) = 0.0137 поста.
  -  Согласно [^3] за 2024 было написано 2.72 миллиарда комментариев. Тогда в день -> 2.72 млн / 365 = 7.452 млн постов. Один пользователь публикует ежедневно 1.507 млн / 110 млн (DAU) = 0.068 комментария.
  -  Согласно [^7] пользователи ежедневно оставляют положительные оценки (upvotes) в среднем 9.4 миллиона раз. Сделаю предположение, что количество отрицательных оценок (downvotes) аналогичное. Таким образом, общее количество оценок, оставляеммых пользователями ежедневно = 9.4 млн + 9.4 млн = 18.8 млн. Один пользователь оставляет ежедневно 18.8 млн / 110 млн (DAU) = 0.171 оценки.
  -  Согласно [^4] на сервисе создается около 1533 сабреддитов каждый день. Один пользователь создает ежедневно 1533 / 110 млн (DAU) = 0.00001 сабреддита.
  -  Согласно [^3] за декабрь 2024 было совершенно в среднем 40 миллионов поисковых запросов в день. Один пользователь совершает ежедневно 40 млн / 110 млн (DAU) = 0.36 поисковых запросов.
Информация касательно ленты рекомендаций на сервисе публично не разглашается, поэтому буду отталкиваться от статистики по количеству визитов за месяц и по среднему времени одной сессии. 
  -  Согласно [^1] среднее время продолжительности одной сессии составляет 13.32 минуты и за месяц в среднем насчитывается 4.88 миллиарда визитов на сервис. Примерное количество сессий пользователя за день составляет 4.88 млрд / 1.21 млрд = 4. Предположу, что пользователь затрачивает около 30 секунд на пост. Один пользователь в день просматривает ((13 * 60 + 60 * 0.32) * 4) секунд / 30 секунд = 107 постов.
  -  Лента реккомендованных постов прогружается по 30 постов за запрос. Учту из вычислений выше, что пользователь в среднем просматривает около 80 постов в день и рассчитаю количество запросов на одного пользователя в день для ленты реккомендаций. На одного пользователя в день уходит около 107 / 30 = 4 запросов для прогрузки ленты.

| Действие пользователя    | Количество на 1 пользователя в день |
|--------------------------|-------------------------------------|
| Авторизация              | 0.03                                |
| Публикация поста         | 0.0137                              |
| Создание комментария     | 0,068                               |
| Выставление оценки       | 0.171                               |
| Создание сабреддита      | 0.00001                             |
| Поисковой запрос         | 0.36                                |
| Просмотр ленты (посты)   | 107                                 |
| Просмотр ленты (запросы) | 4                                   |

## Средний размер хранилища пользователя

У пользователя можно настроить аватарку, имя, баннер, описание. 
  - Для аватарки и баннера буду учитывать максимально возможный размер в виде 500 КБ.
  - Максимальная длина имени составляет 90 символов, а описания - 200. Возьму в среднем длину имени и описания примерно в 25% от максимального размера: 20 и 50. Так как целевая аудитория сервиса проживает в англоговорящих странах, то приму, что символы латиницы будут весить по 1 байту. Таким образом, имя в среднем будет весить 20 байт, а описание - 50. Таким образом, вес профиля пользователя в среднем составляет 500 КБ * 2 + 20 байт + 50 байт = 0.977 МБ.

В публичном доступе нет информации об общем количестве зарегистрированных пользователей, поэтому я учитываю MAU с предположением, что создатели сабреддитов, постов, комментариев являются активными пользователями и входят в число тех, кто посещает сервис ежемесячно.

Согласно [^8] на сервисе существует 1+ млрд постов на момент 2024 года.
  - Согласно [^7] 38% всех постов имеют изображения, 29% являются текстовыми, 21% с видео, а остальные оставшиеся 12% - со ссылкой. Соответственно среднее количество опубликованных одним пользователем...
  Текстовых постов: (1 млрд * 0.29) / 1.21 млрд = 0.239.
  Постов с изображением: (1 млрд * 0.38) / 1.21 млрд = 0.314.
  Постов с видео: (1 млрд * 0.21) / 1.21 млрд = 0.174.
  Постов с ссылкой: (1 млрд * 0.12) / 1.21 млрд = 0.099
  - Каждый пост обязательно сопровождается заголовком, среднюю длину которого возьму в 25% от максимального размера: 75 символов -> 75 байт.
  - В среднем возьму длину текстового сообщения в 200 символов -> размер поста с текстом составляет (200 байт + 75 байт) * 0.239 = 66 байт.
  - В среднем возьму размер фотографии за 2 МБ -> размер поста с изображением на одного пользователя составляет (2 МБ + 75 байт) * 0.314 = 0.628 МБ.
  - В среднем возьму видео длиной 30 секунд и размером в 15 МБ разрешением 720p -> размер поста с видео на одного пользователя составляет 15 МБ * 0.174 = 2.61 МБ.
  - В среднем возьму длину URL-адреса в 75 символов -> размер поста с ссылкой составляет (75 байт + 75 байт) * 0.099 = 15 байт.

Согласно [^8] на сервисе существует 16+ млрд комментариев на момент 2024 года.
  - Возьму в среднем длину комментария в 100 символов -> 100 байт. Количество комментариев в среднем на одного пользователя составляет 16 млрд / 1.21 млрд = 13.2. Таким образом, вес комментариев на одного пользователя составит 13.2 * 100 байт = 1.29 КБ.

Каждый сабреддит имеет те же атрибуты, что и профиль пользователя.
  - Среднее количество созданных одним пользователем сабредиттов составляет 3.5 млн / 1.21 млрд = 0.003. Таким образом, вес сабреддита на одного пользователя составит (500 КБ * 2 + 20 байт + 50 байт) * 0.003 = 0.003 МБ.

Каждый голос имеет в базе данных user_id (8 байт), post_id (8 байт), upvote/downvote (1 байт).
  - Так как нет в публичном доступе информации об общем количестве оценок, то предположу, что на каждого пользователя приходится в среднем по 500 оценок. Размер одной оценки в базе данных составляет 17 байт -> вес всех оценок в среднем на одного пользователя составляет 500 * 17 байт = 8.3 КБ.

| Тип данных                          | Размер, МБ     | Количество |
|-------------------------------------|----------------|------------|
| Профиль                             | 0.977          | 1          |
| Текстовые посты                     | 66 * 1024^-2   | 0.239      |
| Посты с изображением                | 0.628          | 0.314      |
| Посты с видео                       | 2.61           | 0.174      |
| Посты с ссылкой                     | 15 * 1024^-2   | 0.099      |
| Комментариии                        | 1.29 * 1024^-1 | 13.2       |
| Сабреддит                           | 0,003          | 0.003      |
| Оценки                              | 8.3 * 1024^-1  | 500        |
| Итого                               | 4,227          |            |

## Технические метрики
### Размер хранилища
  - Согласно [^9] на момент 2025 года будет около 515 миллионов зарегистрированных пользователей на сервисе. Таким образом, вес всех профилей будет составлять 0.977 МБ * 515 млн = 481.28 ТБ.
  - Вес текстовых постов на одного пользователя составляет 66 * 1024^-2 МБ. Общий вес текстовых постов -> 66 * 1024^-2 МБ * 515 млн = 0.03125 ТБ.
  - Вес постов с изображением на одного пользователя составляет 0.628 МБ. Общий вес постов с изображением -> 0.628 МБ * 515 млн = 307.2 ТБ.
  - Вес постов с видео на одного пользователя составляет 2.61 МБ. Общий вес постов с видео -> 2.61 МБ * 515 млн = 1280 ТБ.
  - Вес постов с ссылкой на одного пользователя составляет 15 * 1024^-2 МБ. Общий вес постов с ссылкой -> 15 * 1024^-2 МБ * 515 млн = 0.007 ТБ.
  - Вес комментариев на одного пользователя составляет 1.29 * 1024^-1 МБ. Общий вес комментариев -> 1.29 * 1024^-1 * 515 млн = 0.6 ТБ.
  - Вес оценок на одного пользователя составляет 8.3 * 1024^-1 МБ. Общий вес оценок -> 8.3 * 1024^-1 * 515 млн = 0.004 ТБ.
  - Согласно [^4] На момент 2022 года было создано около 3.5 миллионов сабреддитов. Каждый месяц создается около 45975 сабреддитов. Таким образом, предположим, что линейно общее количество к 2025 году будет равно 45975 * 12 * 3 + 3.5 млн = 5 155 100. Общий вес всех сабреддитов будет составлять 0.003 МБ * 5 155 100 = 0.015 ТБ.

| Тип данных                          | Размер, ТБ     |
|-------------------------------------|----------------|
| Профиль                             | 481.28         |
| Текстовые посты                     | 0.03125        |
| Посты с изображением                | 307.2          |
| Посты с видео                       | 1280           |
| Посты с ссылкой                     | 0.007          |
| Комментариии                        | 0.6            |
| Сабреддит                           | 0.015          |
| Оценки                              | 0.004          |
| Итого                               | 2069.1         |

<a name="sources"></a>
## Список использованных источников

[^1]: [reddit.com Web Traffic Statistics](https://www.semrush.com/website/reddit.com/overview/)
[^2]: [Reddit by the numbers](https://redditinc.com/press)
[^3]: [Reddit User and Growth Stats](https://backlinko.com/reddit-users)
[^4]: [How Many Subreddits Are There? (Subreddit Statistics)](https://www.businessdasher.com/how-many-subreddits-are-there/)
[^5]: [Reddit Statistics 2025 (Top Picks)](https://www.demandsage.com/reddit-statistics/)
[^6]: [New subreddits by month](https://frontpagemetrics.com/month/)
[^7]: [Reddit Statistics 2025: Traffic, Users, and More](https://sqmagazine.co.uk/reddit-statistics/)
[^8]: [Reddit could use this strategy to ‘monetize aggressively’ following its IPO](https://www.marketwatch.com/story/reddit-could-use-this-strategy-to-monetize-aggressively-following-its-ipo-2e1c91da)
[^9] [How Many Users Does Reddit Have? (2025)](https://electroiq.com/stats/how-many-users-does-reddit-have/)
